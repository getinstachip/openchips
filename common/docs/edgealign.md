# Edge Align Module Documentation

## 1. Overview and Module Description

The `edgealign` module is designed to detect the first rising edge of a slow clock (`slowclk`) in relation to a fast clock (`fastclk`). It generates a pulse (`firstedge`) that aligns with the rising edge of the slow clock, synchronized to the fast clock domain.

## 2. Pinout Diagram

```
         +-----------+
fastclk  |           |
-------->|           |
         |           |
slowclk  |  edgealign|  firstedge
-------->|           |----------->
         |           |
         |           |
         +-----------+
```

## 3. Table of Ports

| Port Name | Direction | Description |
|-----------|-----------|-------------|
| fastclk   | Input     | Fast clock input |
| slowclk   | Input     | Slow clock input |
| firstedge | Output    | Output pulse indicating the first edge of slowclk |

## 4. Table of Parameters

This module does not have any parameters.

## 5. Important Implementation Details

1. The module uses two intermediate registers, `clk45` and `clk90`, to sample the slow clock.
2. `clk45` samples `slowclk` on the negative edge of `fastclk`.
3. `clk90` samples `clk45` on the positive edge of `fastclk`.
4. The `firstedge` output is generated by detecting a rising edge of `slowclk` using the equation: `~clk45 & clk90`.
5. The output `firstedge` is synchronized to the positive edge of `fastclk`.

## 6. GTKWave Simulation Results

![Simulation Waveform](https://i.ibb.co/kyQ2p38/Screenshot-2024-08-17-at-6-36-12-AM.png)

## 7. Major Bugs or Caveats

1. The module assumes that the `fastclk` frequency is significantly higher than the `slowclk` frequency. If this condition is not met, the edge detection may not work correctly.
2. There's a potential for metastability issues if the `slowclk` edge occurs very close to the sampling edge of `fastclk`. Additional synchronization stages might be needed for more robust operation in some systems.
3. The module does not handle the case where `slowclk` might be faster than `fastclk`. Such a scenario would lead to unpredictable behavior.
4. The `firstedge` pulse width is equal to one `fastclk` period, which might be too short for some applications. If a longer pulse is needed, additional logic would be required.